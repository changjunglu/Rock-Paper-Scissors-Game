# 高階 User Story & Use Case v3.0-AC ‧ 2025-07-25

## 版本歷史
| 版本    | 日期       | 內容說明                                           | 負責人 |
|---------|------------|----------------------------------------------------|--------|
| 1.0     | 2025-07-15 | 首版，依PRD產出                                    | AI     |
| 2.0     | 2025-07-16 | 重構更新，基於實際實現                             | AI     |
| 3.0-AC  | 2025-07-25 | 新增AC參照、使用者旅程強化、驗收標準連結           | AI     |

## 📋 文件關聯說明
- **本文件**: 高階使用者故事和業務流程 
- **詳細AC文件**: `userstory_func.md` - 包含完整的驗收標準 (Acceptance Criteria)
- **測試參照**: 每個Story都對應到功能文件中的詳細測試場景

---

## 1. User Story（Epic/Feature/Story分層，標註PRD功能ID）

### Epic 1：核心遊戲體驗
- **Feature 1.1：遊戲機制（F01, F02, F05, F06, F14）**
  - Story 1.1.1：作為玩家，我想每局開始時隨機獲得剪刀石頭布屬性，以便每局都有新挑戰。  
    *→ 詳細AC: `userstory_func.md` Story F01-1 AC1-AC5*
  - Story 1.1.2：作為玩家，我想可以設定RPS變換間隔（3/5/10秒），以便調整遊戲節奏。  
    *→ 詳細AC: `userstory_func.md` Story F01-1 AC2,AC5*
  - Story 1.1.3：作為玩家，我想看到RPS倒數計時器，以便掌握屬性變換時機。  
    *→ 詳細AC: `userstory_func.md` Story F01-1 AC3,AC4*
  - Story 1.1.4：作為玩家，我希望碰撞且屬性相剋時能得分，以便體驗競技樂趣。  
    *→ 詳細AC: `userstory_func.md` Story F03-1 AC1-AC8*
  - Story 1.1.5：作為玩家，我想可以設定勝利分數（1/3/5/7分），以便控制遊戲長度。  
    *→ 詳細AC: `userstory_func.md` Story F03-1 AC5*

- **Feature 1.2：操作與AI（F03, F04, F09, F15, F16）**
  - Story 1.2.1：作為玩家，我想用方向鍵控制角色移動，以便靈活操作。  
    *→ 詳細AC: `userstory_func.md` Story F02-1 AC1-AC6*
  - Story 1.2.2：作為玩家，我希望能選擇不同AI策略（積極/謹慎/隨機/進階），以便挑戰不同難度。  
    *→ 詳細AC: `userstory_func.md` Story F04-1 AC1-AC8*
  - Story 1.2.3：作為玩家，我希望能隨時暫停或重啟遊戲，以便自主掌控節奏。  
    *→ 詳細AC: `userstory_func.md` Story F07-1 AC3,AC4*
  - Story 1.2.4：作為玩家，我希望AI不會卡在牆角，以便遊戲流暢進行。  
    *→ 詳細AC: `userstory_func.md` Story F05-1 AC1-AC8*
  - Story 1.2.5：作為玩家，我希望進階AI能預測我的移動，以便提供更大挑戰。  
    *→ 詳細AC: `userstory_func.md` Story F08-1 AC1-AC8*

- **Feature 1.3：視覺與反饋（F07, F08, F17, F18, F19）**
  - Story 1.3.1：作為玩家，我想看到手勢emoji（✊✋✌️）顯示，以便直覺理解屬性。  
    *→ 詳細AC: `userstory_func.md` Story F06-1 AC1,AC4*
  - Story 1.3.2：作為玩家，我希望有清晰的遊戲區域（800x600），以便專注遊戲。  
    *→ 詳細AC: `userstory_func.md` Story F02-1 AC2*
  - Story 1.3.3：作為玩家，我想有完整的遊戲設定面板，以便快速調整參數。  
    *→ 詳細AC: `userstory_func.md` Story F07-1 AC1,AC2,AC6*
  - Story 1.3.4：作為玩家，我想看到清晰的玩家資訊顯示，以便了解當前狀態。  
    *→ 詳細AC: `userstory_func.md` Story F06-1 AC2,AC3*
  - Story 1.3.5：作為玩家，我希望遊戲狀態能即時更新，以便獲得流暢體驗。  
    *→ 詳細AC: `userstory_func.md` Story F06-1 AC4,AC5*

### Epic 2：技術品質體驗
- **Feature 2.1：性能與可靠性（F13, F20）**
  - Story 2.1.1：作為玩家，我希望遊戲能在本地運行，以便無需網路連接。  
    *→ 技術需求：性能指標在各Story的AC8中定義*
  - Story 2.1.2：作為玩家，我希望遊戲具有類型安全，以便避免程式錯誤。  
    *→ 技術需求：TypeScript實現，編譯零錯誤要求*

- **Feature 2.2：可訪問性（F12）**
  - Story 2.2.1：作為視覺不便者，我希望介面有良好色彩對比和鍵盤導航，方便操作。  
    *→ 詳細AC: `userstory_func.md` Story F09-1 AC1-AC8*

---

## 2. 高階 Use Case（UML標準欄位，標註PRD功能ID）

| Use Case ID | 名稱             | 主要演員 | 前置條件         | 主流程                                                         | 例外流程/備註         | 追溯PRD功能ID |
|-------------|------------------|----------|------------------|----------------------------------------------------------------|-----------------------|---------------|
| UC01        | 開始新遊戲       | 玩家     | 進入遊戲畫面     | 1. 選擇遊戲設定<br>2. 隨機分配屬性<br>3. 顯示倒數計時<br>4. 開始遊戲 | 無                    | F01, F02, F06, F17 |
| UC02        | 角色移動         | 玩家/AI  | 遊戲進行中       | 1. 玩家方向鍵操作<br>2. AI策略移動<br>3. 更新位置<br>4. 邊界檢查 | AI牆角脫困機制         | F03, F04, F08, F15 |
| UC03        | 碰撞與得分       | 系統     | 角色碰撞         | 1. 檢測碰撞<br>2. 判斷屬性相剋<br>3. 更新分數<br>4. 重置位置    | 平手時無分數變化       | F05, F10, F19 |
| UC04        | 屬性變換         | 系統     | 計時器到期       | 1. 停止計時<br>2. 隨機分配新屬性<br>3. 重啟計時<br>4. 更新顯示  | 無                    | F02, F06, F07 |
| UC05        | 遊戲控制         | 玩家     | 遊戲進行中       | 1. 按下暫停/重啟鍵<br>2. 暫停/重啟計時與操作<br>3. 更新狀態    | 無                    | F09           |
| UC06        | 勝負判定         | 系統     | 達到勝利分數     | 1. 檢查分數<br>2. 確定勝利者<br>3. 顯示結果<br>4. 停止遊戲    | 無                    | F11, F14, F19 |
| UC07        | AI策略選擇       | 玩家     | 遊戲設定中       | 1. 選擇AI類型<br>2. 確認設定<br>3. 應用AI策略<br>4. 開始遊戲   | 無                    | F04, F17 |
| UC08        | 設定遊戲參數     | 玩家     | 遊戲設定中       | 1. 調整RPS間隔<br>2. 設定勝利分數<br>3. 確認設定<br>4. 開始遊戲 | 無                    | F14, F17 |

---

## 3. 用戶旅程地圖

### 新手玩家旅程
1. **進入遊戲** → 看到直觀的遊戲介面
2. **了解規則** → 通過手勢emoji快速理解
3. **選擇設定** → 從簡單設定開始（隨機AI、5秒間隔、3分制）
4. **開始遊戲** → 使用方向鍵移動，體驗基本玩法
5. **逐步挑戰** → 嘗試不同AI策略和設定

### 熟練玩家旅程
1. **快速設定** → 選擇進階AI、短間隔、高分制
2. **策略調整** → 根據AI行為調整自己的策略
3. **技巧精進** → 預測屬性變換時機，優化移動路徑
4. **挑戰極限** → 嘗試在最困難設定下獲勝

---

## 4. 成功指標

### 用戶參與度
- 90%玩家能在10秒內理解遊戲規則
- 80%玩家會嘗試不同AI策略
- 70%玩家會調整遊戲參數
- 60%玩家會重複遊玩

### 技術指標
- 遊戲載入時間<3秒
- 操作回應延遲<16ms
- 60fps穩定運行
- 無程式崩潰

---

## 5. 風險與緩解措施

### 用戶體驗風險
- **風險**：遊戲太簡單或太難
- **緩解**：提供多種AI策略和可調參數

### 技術風險
- **風險**：AI卡在牆角影響體驗
- **緩解**：實現通用牆角脫困機制

### 可訪問性風險
- **風險**：視覺不便者無法使用
- **緩解**：提供鍵盤導航和高對比設計

---

## 6. 追溯矩陣
- 來源PRD功能ID：F01~F20
- 涵蓋所有核心功能和用戶需求
- 支援技術實現和測試驗證

---

## 7. 驗收標準品質保證

### 📊 AC涵蓋度矩陣
| Epic/Feature | 高階Story數量 | 對應功能Story | AC覆蓋率 | 測試場景 |
|--------------|---------------|---------------|----------|----------|
| Epic 1.1 遊戲機制 | 5 | F01-1, F03-1 | 100% | 正常+異常流程 |
| Epic 1.2 操作AI | 5 | F02-1, F04-1, F05-1, F07-1, F08-1 | 100% | 含邊界條件 |
| Epic 1.3 視覺反饋 | 5 | F06-1, F07-1 | 100% | 含響應式設計 |
| Epic 2.1 性能品質 | 2 | 所有Story AC8 | 100% | 效能基準 |
| Epic 2.2 可訪問性 | 1 | F09-1 | 100% | WCAG標準 |

### 🎯 使用者體驗驗證
#### 新手玩家旅程驗證點
1. **10秒理解規則** → AC驗證：F06-1 AC1 (emoji顯示), F07-1 AC6 (介面說明)
2. **簡單設定** → AC驗證：F07-1 AC1,AC2 (設定面板), F01-1 AC2 (預設值)
3. **基本操作** → AC驗證：F02-1 AC1-AC4 (移動控制), F07-1 AC5 (快捷鍵)
4. **獲得成就感** → AC驗證：F03-1 AC2-AC4 (勝負判斷), F06-1 AC4 (視覺反饋)

#### 熟練玩家旅程驗證點
1. **快速設定** → AC驗證：F04-1 AC1 (AI選擇), F07-1 AC7 (設定持久化)
2. **策略挑戰** → AC驗證：F04-1 AC2-AC5 (AI行為差異), F08-1 AC1-AC8 (預測AI)
3. **技巧精進** → AC驗證：F01-1 AC3,AC4 (時機掌握), F05-1 AC1-AC8 (AI脫困)

### 🔍 品質檢查清單
#### 功能完整性
- [x] 所有高階Story都有對應的詳細AC
- [x] AC涵蓋正常流程、異常處理、邊界條件
- [x] 包含效能要求和可訪問性標準
- [x] 提供明確的測試驗證方法

#### 可追蹤性
- [x] 高階Story → 功能Story → AC → 測試案例
- [x] PRD功能ID → Use Case → Story映射
- [x] 業務價值 → 技術實現 → 驗收標準連結

#### 測試就緒度
- [x] 每個AC都是可測試的具體條件
- [x] 包含自動化測試和手工測試場景  
- [x] 效能基準和可訪問性標準明確定義
- [x] 邊界條件和錯誤處理場景完整

### 📈 成功指標對應
| 原定指標 | 對應AC驗證點 | 預期結果 |
|----------|--------------|----------|
| 90%玩家10秒內理解遊戲 | F06-1 AC1,AC2 | emoji+資訊面板清晰 |
| 80%玩家嘗試不同AI | F04-1 AC1,AC6 | 策略選擇介面友善 |
| 70%玩家調整參數 | F07-1 AC1,AC2 | 設定面板易用 |
| 60%玩家重複遊玩 | F03-1 AC5, F08-1 AC5 | 挑戰性適中 |

### 🚀 實施里程碑
- **Phase 1**: Sprint 1 核心機制 (F01-1, F02-1, F03-1)
- **Phase 2**: Sprint 2 AI系統 (F04-1, F05-1)  
- **Phase 3**: Sprint 3 UI優化 (F06-1, F07-1)
- **Phase 4**: Sprint 4 進階功能 (F08-1, F09-1)

---

## 8. 簽署確認
| 角色         | 姓名/簽名 | 日期       | 版本    |
|--------------|-----------|------------|---------|
| 產品經理     | AI        | 2025-07-25 | v3.0-AC |
| 開發負責人   | AI        | 2025-07-25 | v3.0-AC |
| UI/UX設計師  | AI        | 2025-07-25 | v3.0-AC |
| 測試負責人   | AI        | 2025-07-25 | v3.0-AC | 